# -*- mode: Shell-script -*-

# WARNING: Do not edit this file.
# It was generated by processing {{ yadm.source }}

#
# Executes commands at the start of an interactive session.
#
# Authors:
#   Sorin Ionescu <sorin.ionescu@gmail.com>
#

# Source Prezto.
#
## Profiling
## https://lildude.co.uk/speeding-up-my-zsh-shell
[ -z "$ZPROF" ] || zmodload zsh/zprof


if [[ "$TERM" == "dumb" || "$TERM" == "tramp" ]]; then
    unsetopt zle
    unsetopt prompt_cr
    unsetopt prompt_subst
    if whence -w precmd >/dev/null; then
        unfunction precmd
    fi
    if whence -w preexec >/dev/null; then
        unfunction preexec
    fi
    PS1='$ '
    return
fi

if [[ -s "${ZDOTDIR:-$HOME}/.zprezto/init.zsh" ]]; then
    source "${ZDOTDIR:-$HOME}/.zprezto/init.zsh"
fi

# Customize to your needs...

export ZSH_CUSTOM_DIR=${HOME}/.zshcustom

# env.zsh, scriptlib.zsh
source ${ZSH_CUSTOM_DIR}/noninteractive.zsh
source ${ZSH_CUSTOM_DIR}/brew.zsh
source ${ZSH_CUSTOM_DIR}/bun.zsh
source ${ZSH_CUSTOM_DIR}/input.zsh
source ${ZSH_CUSTOM_DIR}/git.zsh
source ${ZSH_CUSTOM_DIR}/gt.zsh
source ${ZSH_CUSTOM_DIR}/ssh.zsh
source ${ZSH_CUSTOM_DIR}/fzf.zsh
source ${ZSH_CUSTOM_DIR}/misc.zsh
source ${ZSH_CUSTOM_DIR}/pipx.zsh
source ${ZSH_CUSTOM_DIR}/direnv.zsh
source ${ZSH_CUSTOM_DIR}/conda.zsh
source ${ZSH_CUSTOM_DIR}/abduco.zsh

source ${ZSH_CUSTOM_DIR}/doom.zsh
source ${ZSH_CUSTOM_DIR}/just.zsh

{% if yadm.class == "personal" %}
source ${ZSH_CUSTOM_DIR}/rtx.zsh
source ${ZSH_CUSTOM_DIR}/gcloud.zsh
source ${ZSH_CUSTOM_DIR}/gcloud-completion.zsh

# source ${ZSH_CUSTOM_DIR}/android.zsh
source ${ZSH_CUSTOM_DIR}/docker.zsh
source ${ZSH_CUSTOM_DIR}/rye.zsh
{% endif %}



{% if yadm.class == "remote" %}
## GCP includes
# prepends to path, so keep it last
source ${ZSH_CUSTOM_DIR}/cuda.zsh
source ${ZSH_CUSTOM_DIR}/docker.zsh
{% endif %}



## Prompt/directory tracking;
source ${ZSH_CUSTOM_DIR}/vterm.zsh
source ${ZSH_CUSTOM_DIR}/prompt.zsh

source ${ZSH_CUSTOM_DIR}/zoxide.zsh
source ${ZSH_CUSTOM_DIR}/build.zsh


source ${ZSH_CUSTOM_DIR}/aliases.zsh
source ${ZSH_CUSTOM_DIR}/atuin.zsh
source ${ZSH_CUSTOM_DIR}/secrets.zsh
source ${ZSH_CUSTOM_DIR}/less.zsh
# source ${ZSH_CUSTOM_DIR}/tilix.zsh



# If you put this in any of the actual files, it will reset completions?
# It needs to be at the end!
#
# autoload -Uz compinit && compinit


# https://github.com/Aloxaf/fzf-tab/issues/24
# needs to be at the end or it doesn't work
zstyle -d ':completion:*' format
zstyle ':completion:*:descriptions' format '[%d]'
zstyle ':completion:*' file-sort modification
# set list-colors to enable filename colorizing
zstyle ':completion:*' list-colors ${(s.:.)LS_COLORS}
zstyle ':completion:*' menu no

# disable sort when completing `git checkout`
zstyle ':completion:*:git-checkout:*' sort false
# force zsh not to show completion menu, which allows fzf-tab to capture the unambiguous prefix
zstyle ':fzf-tab:complete:*' fzf-preview 'lsd -h --date relative --group-dirs=first --blocks size,date,permission,user,name --depth 3 --classify $realpath -l'
zstyle ':fzf-tab:complete:*' fzf-bindings 'ctrl-/:toggle-preview'
zstyle ':fzf-tab:*' sort false



# test -e "${HOME}/.iterm2_shell_integration.zsh" && source "${HOME}/.iterm2_shell_integration.zsh"

# /usr/local/opt/fzf/install after brew install fzf
# [ -f ~/.fzf.zsh ] && source ~/.fzf.zsh

## Profiling: load at beginning of file
[ -z "$ZPROF" ] || zprof
